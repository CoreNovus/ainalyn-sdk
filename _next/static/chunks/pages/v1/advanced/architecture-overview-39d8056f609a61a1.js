(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{4516:function(i,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/v1/advanced/architecture-overview",function(){return n(8856)}])},8856:function(i,s,n){"use strict";n.r(s),n.d(s,{useTOC:function(){return d}});var e=n(5893),h=n(7812),l=n(8036),r=n(9299),a=n(5192);function d(i){return[{value:"Architectural Principles",id:"architectural-principles",depth:2},{value:"Layer Architecture",id:"layer-architecture",depth:2},{value:"Domain Layer",id:"domain-layer",depth:2},{value:"Adapters Layer",id:"adapters-layer",depth:2},{value:"Inbound Adapters",id:"inbound-adapters",depth:3},{value:"Outbound Adapters",id:"outbound-adapters",depth:3},{value:"Application Layer",id:"application-layer",depth:2},{value:"Ports",id:"ports",depth:3},{value:"Services",id:"services",depth:3},{value:"Infrastructure Layer",id:"infrastructure-layer",depth:2},{value:"Public API Layer",id:"public-api-layer",depth:2},{value:"Dependency Flow",id:"dependency-flow",depth:2},{value:"Complete Directory Structure",id:"complete-directory-structure",depth:2},{value:"Design Patterns",id:"design-patterns",depth:2},{value:"Dependency Inversion",id:"dependency-inversion",depth:3},{value:"Interface Segregation",id:"interface-segregation",depth:3},{value:"Immutability",id:"immutability",depth:3},{value:"Factory Pattern",id:"factory-pattern",depth:3},{value:"Testing Strategy",id:"testing-strategy",depth:2},{value:"Unit Tests",id:"unit-tests",depth:3},{value:"Integration Tests",id:"integration-tests",depth:3},{value:"Benefits",id:"benefits",depth:2},{value:"For Contributors",id:"for-contributors",depth:2},{value:"Further Reading",id:"further-reading",depth:2}]}s.default=(0,h.c)(function(i){let{toc:s=d(i)}=i,n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,r.a)(),...i.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h1,{children:"Architecture Overview"}),"\n",(0,e.jsxs)(n.p,{children:["The Ainalyn SDK is built on ",(0,e.jsx)(n.strong,{children:"Hexagonal Architecture"})," principles, ensuring clean separation of concerns, testability, and maintainability."]}),"\n",(0,e.jsxs)(n.blockquote,{children:["\n",(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:"Note"}),": This document is for contributors who want to understand or modify the SDK’s internal architecture. If you’re using the SDK to build Agents, see the ",(0,e.jsx)(n.a,{href:"/v1/concepts/what-is-an-agent/",children:"Concepts"})," section instead."]}),"\n"]}),"\n",(0,e.jsx)(n.h2,{id:s[0].id,children:s[0].value}),"\n",(0,e.jsx)(n.p,{children:"The SDK architecture enforces these core principles:"}),"\n",(0,e.jsxs)(n.ol,{children:["\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:"Compiler, Not Runtime"})," - The SDK creates Agent Descriptions; execution belongs to the platform"]}),"\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:"Dependency Inversion"})," - Core business logic depends on abstractions, not implementations"]}),"\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:"Clean Boundaries"})," - Each layer has a single, well-defined responsibility"]}),"\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:"Immutability"})," - Domain entities are immutable by design"]}),"\n"]}),"\n",(0,e.jsx)(n.h2,{id:s[1].id,children:s[1].value}),"\n",(0,e.jsx)(n.pre,{tabIndex:"0","data-language":"plaintext","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"┌─────────────────────────────────────────────────────────────┐"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│                     Ainalyn SDK                             │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│                                                             │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  ┌──────────────────────────────────────────────────────┐  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  │      Public API & CLI                                │  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  │  api.py, cli.py, __init__.py                         │  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  └──────────────────┬───────────────────────────────────┘  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│                     │                                       │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  ┌──────────────────▼───────────────────────────────────┐  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  │      Infrastructure                                  │  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  │  service_factory.py, dependency wiring               │  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  └──────────────────┬───────────────────────────────────┘  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│                     │                                       │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  ┌──────────────────▼───────────────────────────────────┐  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  │      Application                                     │  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  │  services.py, use_cases/, ports/                     │  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  └──────────────────┬───────────────────────────────────┘  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│                     │                                       │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  ┌──────────────────▼───────────────────────────────────┐  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  │      Adapters                                        │  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  │  inbound/builders, outbound/validators               │  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  └──────────────────┬───────────────────────────────────┘  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│                     │                                       │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  ┌──────────────────▼───────────────────────────────────┐  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  │      Domain                                          │  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  │  entities/, rules/, errors.py                        │  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│  └──────────────────────────────────────────────────────┘  │"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"└─────────────────────────────────────────────────────────────┘"})})]})}),"\n",(0,e.jsx)(n.h2,{id:s[2].id,children:s[2].value}),"\n",(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:"Location"}),": ",(0,e.jsx)(n.code,{children:"ainalyn/domain/"})]}),"\n",(0,e.jsx)(n.p,{children:"The domain layer contains pure business logic with zero external dependencies."}),"\n",(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:"Structure"}),":"]}),"\n",(0,e.jsx)(n.pre,{tabIndex:"0","data-language":"plaintext","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"domain/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"├── entities/          # Immutable domain entities"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   ├── agent_definition.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   ├── workflow.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   ├── node.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   └── ..."})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"├── rules/             # Business rules and validation"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   └── definition_rules.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"└── errors.py          # Domain-specific errors"})})]})}),"\n",(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,e.jsx)(n.pre,{icon:a.gx,tabIndex:"0","data-language":"python","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"@dataclass"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"frozen"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"True"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:")"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"class"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" AgentDefinition"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    """'})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"    Agent Definition entity."})}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"    This is a description entity, not an executable implementation."})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    """'})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    name: "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"str"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    version: "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"str"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    description: "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"str"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    workflows: tuple[Workflow, "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"..."}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"]"})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" __post_init__"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(self) -> "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"None"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'        """Validate domain invariants."""'})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"        if"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" not"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" DefinitionRules.is_valid_name("}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:".name):"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"            raise"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" InvalidFormatError("}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"f"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"Invalid name: '}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"{self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:".name"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"}"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:")"})]})]})}),"\n",(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:"Characteristics"}),":"]}),"\n",(0,e.jsxs)(n.ul,{children:["\n",(0,e.jsx)(n.li,{children:"Frozen dataclasses (immutable)"}),"\n",(0,e.jsxs)(n.li,{children:["Self-validating via ",(0,e.jsx)(n.code,{children:"__post_init__"})]}),"\n",(0,e.jsx)(n.li,{children:"No imports from outer layers"}),"\n",(0,e.jsx)(n.li,{children:"Pure Python types only"}),"\n"]}),"\n",(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:"Domain Errors"}),":"]}),"\n",(0,e.jsx)(n.pre,{icon:a.gx,tabIndex:"0","data-language":"python","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"class"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" DefinitionError"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"Exception"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"):"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    """Base error for Agent Definition compilation issues."""'})}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"class"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" InvalidFormatError"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"DefinitionError"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"):"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    """Field format validation error."""'})}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"class"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" ReferenceError"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"DefinitionError"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"):"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    """Invalid reference within definition."""'})}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"class"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" CyclicDependencyError"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"DefinitionError"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"):"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    """Workflow contains cycles."""'})})]})}),"\n",(0,e.jsx)(n.h2,{id:s[3].id,children:s[3].value}),"\n",(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:"Location"}),": ",(0,e.jsx)(n.code,{children:"ainalyn/adapters/"})]}),"\n",(0,e.jsx)(n.p,{children:"Adapters implement port interfaces and handle external interactions."}),"\n",(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:"Structure"}),":"]}),"\n",(0,e.jsx)(n.pre,{tabIndex:"0","data-language":"plaintext","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"adapters/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"├── inbound/           # Entry points"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   └── builders/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│       ├── agent_builder.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│       ├── workflow_builder.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│       └── ..."})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"└── outbound/          # External integrations"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"    ├── schema_validator.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"    ├── static_analyzer.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"    ├── yaml_serializer.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"    └── file_writer.py"})})]})}),"\n",(0,e.jsx)(n.h3,{id:s[4].id,children:s[4].value}),"\n",(0,e.jsx)(n.p,{children:"Provide developer-facing DSL for constructing domain entities:"}),"\n",(0,e.jsx)(n.pre,{icon:a.gx,tabIndex:"0","data-language":"python","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"class"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" AgentBuilder"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    """Fluent builder for Agent Definitions."""'})}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" __init__"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(self, name: "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"str"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") -> "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"None"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"        self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._name "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" name"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"        self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._version: "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"str"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" |"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" None"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" ="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" None"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"        self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._workflows: list[Workflow] "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" []"})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" version"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(self, version: "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"str"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") -> AgentBuilder:"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'        """Set agent version."""'})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"        self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._version "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" version"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"        return"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" self"})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" add_workflow"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(self, workflow: Workflow) -> AgentBuilder:"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'        """Add a workflow."""'})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"        self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._workflows.append(workflow)"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"        return"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" self"})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" build"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(self) -> AgentDefinition:"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'        """Build immutable AgentDefinition."""'})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"        if"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._version "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"is"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" None"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"            raise"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" MissingFieldError("}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"version required"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:")"})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"        return"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" AgentDefinition("})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"            name"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._name,"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"            version"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._version,"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"            workflows"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"tuple"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._workflows),"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        )"})})]})}),"\n",(0,e.jsx)(n.h3,{id:s[5].id,children:s[5].value}),"\n",(0,e.jsx)(n.p,{children:"Implement technical concerns like serialization and validation:"}),"\n",(0,e.jsx)(n.pre,{icon:a.gx,tabIndex:"0","data-language":"python","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"class"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" YamlSerializer"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    """YAML serialization adapter."""'})}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" serialize"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(self, definition: AgentDefinition) -> "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"str"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'        """Serialize Agent Definition to YAML."""'})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        data "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._to_dict(definition)"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"        return"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" yaml.dump(data, "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"sort_keys"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"False"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:")"})]})]})}),"\n",(0,e.jsx)(n.h2,{id:s[6].id,children:s[6].value}),"\n",(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:"Location"}),": ",(0,e.jsx)(n.code,{children:"ainalyn/application/"})]}),"\n",(0,e.jsx)(n.p,{children:"Orchestrates domain logic via port interfaces."}),"\n",(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:"Structure"}),":"]}),"\n",(0,e.jsx)(n.pre,{tabIndex:"0","data-language":"plaintext","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"application/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"├── ports/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   ├── inbound/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   ├── compile_agent_definition.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   ├── validate_agent_definition.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   └── export_agent_definition.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   └── outbound/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│       ├── definition_schema_validation.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│       ├── definition_static_analysis.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│       ├── definition_serialization.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│       └── definition_persistence.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"├── use_cases/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   ├── compile_definition.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   ├── validate_definition.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   └── export_definition.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"└── services.py"})})]})}),"\n",(0,e.jsx)(n.h3,{id:s[7].id,children:s[7].value}),"\n",(0,e.jsx)(n.p,{children:"Define contracts between application and adapters:"}),"\n",(0,e.jsx)(n.pre,{icon:a.gx,tabIndex:"0","data-language":"python","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"class"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" IDefinitionSchemaValidator"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"Protocol"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"):"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    """Port for schema validation capability."""'})}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" validate_schema"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        self,"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        definition: AgentDefinition"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    ) -> tuple[ValidationError, "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"..."}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"]:"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'        """Validate Agent Definition structure."""'})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"        ..."})})]})}),"\n",(0,e.jsx)(n.h3,{id:s[8].id,children:s[8].value}),"\n",(0,e.jsx)(n.p,{children:"Orchestrate use cases via dependency injection:"}),"\n",(0,e.jsx)(n.pre,{icon:a.gx,tabIndex:"0","data-language":"python","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"class"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" DefinitionService"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    """Core service for Agent Definition operations."""'})}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" __init__"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        self,"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        schema_validator: IDefinitionSchemaValidator,"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        static_analyzer: IDefinitionAnalyzer,"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        serializer: IDefinitionSerializer,"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        writer: IDefinitionWriter "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"|"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" None"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" ="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" None"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    ):"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"        self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._schema_validator "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" schema_validator"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"        self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._static_analyzer "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" static_analyzer"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"        self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._serializer "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" serializer"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"        self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._writer "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" writer"})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" compile"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(self, definition: AgentDefinition) -> CompilationResult:"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'        """Compile and validate Agent Definition."""'})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        schema_errors "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._schema_validator.validate_schema(definition)"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        analysis_issues "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._static_analyzer.analyze(definition)"})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"        return"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" CompilationResult("})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"            definition"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"definition,"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"            errors"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"schema_errors "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"+"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" analysis_issues,"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        )"})})]})}),"\n",(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:"Key Principle"}),": Services depend only on port interfaces (abstractions), never on concrete adapter implementations."]}),"\n",(0,e.jsx)(n.h2,{id:s[9].id,children:s[9].value}),"\n",(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:"Location"}),": ",(0,e.jsx)(n.code,{children:"ainalyn/infrastructure/"})]}),"\n",(0,e.jsx)(n.p,{children:"Handles dependency wiring and configuration."}),"\n",(0,e.jsx)(n.pre,{icon:a.gx,tabIndex:"0","data-language":"python","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" create_default_service"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"() -> DefinitionService:"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    """'})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"    Create DefinitionService with default adapter implementations."})}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"    This factory centralizes dependency wiring, keeping the"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"    application layer clean and testable."})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    """'})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    return"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" DefinitionService("})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"        schema_validator"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"SchemaValidator(),"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"        static_analyzer"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"StaticAnalyzer(),"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"        serializer"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"YamlSerializer(),"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"        writer"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"FileWriter(),"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    )"})})]})}),"\n",(0,e.jsx)(n.h2,{id:s[10].id,children:s[10].value}),"\n",(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:"Location"}),": ",(0,e.jsx)(n.code,{children:"ainalyn/api.py"}),", ",(0,e.jsx)(n.code,{children:"ainalyn/cli.py"}),", ",(0,e.jsx)(n.code,{children:"ainalyn/__init__.py"})]}),"\n",(0,e.jsx)(n.p,{children:"Provides user-facing interfaces."}),"\n",(0,e.jsx)(n.pre,{icon:a.gx,tabIndex:"0","data-language":"python","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"# api.py"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"from"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" ainalyn.infrastructure.service_factory "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"import"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" create_default_service"})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"_service: DefinitionService "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"|"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" None"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" ="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" None"})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" _get_service"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"() -> DefinitionService:"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    """Get or create service instance."""'})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    global"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" _service"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    if"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" _service "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"is"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" None"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        _service "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" create_default_service()"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    return"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" _service"})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" validate"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(definition: AgentDefinition) -> ValidationResult:"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    """Validate an Agent Definition."""'})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    service "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" _get_service()"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    return"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" service.validate(definition)"})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" export_yaml"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(definition: AgentDefinition) -> "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"str"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    """Export Agent Definition to YAML."""'})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    service "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" _get_service()"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    return"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" service.export_yaml(definition)"})]})]})}),"\n",(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:"Public Exports"})," (",(0,e.jsx)(n.code,{children:"__init__.py"}),"):"]}),"\n",(0,e.jsx)(n.pre,{icon:a.gx,tabIndex:"0","data-language":"python","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"__all__"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" ="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" ["})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"    # High-level API"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    "validate"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    "export_yaml"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    "compile_agent"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"    # Builders"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    "AgentBuilder"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    "WorkflowBuilder"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    "NodeBuilder"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"    # Domain entities"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    "AgentDefinition"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    "Workflow"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    "Node"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"    # Results"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    "ValidationResult"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"    # Errors"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    "DefinitionError"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:","})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"]"})})]})}),"\n",(0,e.jsx)(n.h2,{id:s[11].id,children:s[11].value}),"\n",(0,e.jsx)(n.p,{children:"Dependencies always point inward toward the domain:"}),"\n",(0,e.jsx)(n.pre,{tabIndex:"0","data-language":"plaintext","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"Public API"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"    ↓"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"Infrastructure"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"    ↓"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"Application (depends on: domain + ports)"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"    ↓"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"Adapters (depends on: domain, implements: ports)"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"    ↓"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"Domain (depends on: nothing)"})})]})}),"\n",(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:"Benefits"}),":"]}),"\n",(0,e.jsxs)(n.ul,{children:["\n",(0,e.jsx)(n.li,{children:"Domain is stable and isolated"}),"\n",(0,e.jsx)(n.li,{children:"Business rules in one place"}),"\n",(0,e.jsx)(n.li,{children:"Adapters are swappable"}),"\n",(0,e.jsx)(n.li,{children:"Easy to test each layer"}),"\n"]}),"\n",(0,e.jsx)(n.h2,{id:s[12].id,children:s[12].value}),"\n",(0,e.jsx)(n.pre,{tabIndex:"0","data-language":"plaintext","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"ainalyn/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"├── domain/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   ├── entities/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   ├── agent_definition.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   ├── workflow.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   ├── node.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   ├── module.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   ├── prompt.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   └── tool.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   ├── rules/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   └── definition_rules.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   └── errors.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"├── adapters/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   ├── inbound/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   └── builders/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │       ├── agent_builder.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │       ├── workflow_builder.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │       ├── node_builder.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │       ├── module_builder.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │       ├── prompt_builder.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │       └── tool_builder.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   └── outbound/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│       ├── schema_validator.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│       ├── static_analyzer.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│       ├── yaml_serializer.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│       └── file_writer.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"├── application/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   ├── ports/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   ├── inbound/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   │   ├── compile_agent_definition.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   │   ├── validate_agent_definition.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   │   └── export_agent_definition.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   └── outbound/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │       ├── definition_schema_validation.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │       ├── definition_static_analysis.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │       ├── definition_serialization.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │       └── definition_persistence.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   ├── use_cases/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   ├── compile_definition.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   ├── validate_definition.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   │   └── export_definition.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   └── services.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"├── infrastructure/"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   ├── service_factory.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│   └── default_config.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"│"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"├── api.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"├── cli.py"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{children:"└── __init__.py"})})]})}),"\n",(0,e.jsx)(n.h2,{id:s[13].id,children:s[13].value}),"\n",(0,e.jsx)(n.h3,{id:s[14].id,children:s[14].value}),"\n",(0,e.jsx)(n.pre,{icon:a.gx,tabIndex:"0","data-language":"python","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"# ✅ Good: Depends on abstraction"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"class"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" DefinitionService"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" __init__"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(self, validator: IDefinitionSchemaValidator):"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"        self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._validator "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" validator"})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"# ❌ Bad: Depends on concrete implementation"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"class"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" DefinitionService"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" __init__"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(self):"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"        self"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"._validator "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" SchemaValidator()"})]})]})}),"\n",(0,e.jsx)(n.h3,{id:s[15].id,children:s[15].value}),"\n",(0,e.jsx)(n.pre,{icon:a.gx,tabIndex:"0","data-language":"python","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"# ✅ Good: Focused interface"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"class"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" IDefinitionSerializer"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"Protocol"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"):"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" serialize"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(self, definition: AgentDefinition) -> "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"str"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"..."})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"# ❌ Bad: Too many responsibilities"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"class"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" IDefinitionHandler"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"Protocol"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"):"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" validate"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(self, definition: AgentDefinition) -> "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"bool"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"..."})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" serialize"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(self, definition: AgentDefinition) -> "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"str"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"..."})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" write"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(self, path: "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"str"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", content: "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"str"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") -> "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"None"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"..."})]})]})}),"\n",(0,e.jsx)(n.h3,{id:s[16].id,children:s[16].value}),"\n",(0,e.jsx)(n.pre,{icon:a.gx,tabIndex:"0","data-language":"python","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"@dataclass"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"frozen"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"True"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:")"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"class"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" AgentDefinition"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:":"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    name: "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"str"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    version: "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"str"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"    # Immutable after construction"})})]})}),"\n",(0,e.jsx)(n.h3,{id:s[17].id,children:s[17].value}),"\n",(0,e.jsx)(n.pre,{icon:a.gx,tabIndex:"0","data-language":"python","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" create_default_service"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"() -> DefinitionService:"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'    """Factory for default service configuration."""'})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    return"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" DefinitionService("})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"        schema_validator"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"SchemaValidator(),"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"        static_analyzer"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"StaticAnalyzer(),"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"        serializer"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"YamlSerializer(),"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    )"})})]})}),"\n",(0,e.jsx)(n.h2,{id:s[18].id,children:s[18].value}),"\n",(0,e.jsx)(n.h3,{id:s[19].id,children:s[19].value}),"\n",(0,e.jsx)(n.p,{children:"Test each layer independently:"}),"\n",(0,e.jsx)(n.pre,{icon:a.gx,tabIndex:"0","data-language":"python","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"# Domain tests (no mocks)"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" test_agent_validates_name"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"():"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    with"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" pytest.raises(InvalidFormatError):"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        AgentDefinition("}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"name"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"invalid name!"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"..."}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:")"})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"# Application tests (mock ports)"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" test_service_orchestrates"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(mock_validator, mock_analyzer):"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    service "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" DefinitionService("})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"        schema_validator"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"mock_validator,"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"        static_analyzer"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"mock_analyzer,"})]}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    )"})}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    service.validate(agent)"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    assert"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" mock_validator.validate_schema.called"})]}),"\n",(0,e.jsx)(n.span,{children:" "}),"\n",(0,e.jsx)(n.span,{children:(0,e.jsx)(n.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"# Adapter tests (test implementations)"})}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" test_yaml_serializer"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"():"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    serializer "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" YamlSerializer()"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    yaml "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" serializer.serialize(agent)"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    assert"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:' "name: TestAgent"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" in"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" yaml"})]})]})}),"\n",(0,e.jsx)(n.h3,{id:s[20].id,children:s[20].value}),"\n",(0,e.jsx)(n.p,{children:"Test full stack with real implementations:"}),"\n",(0,e.jsx)(n.pre,{icon:a.gx,tabIndex:"0","data-language":"python","data-word-wrap":"",children:(0,e.jsxs)(n.code,{children:[(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"def"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" test_full_compilation"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"():"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    service "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" create_default_service()"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    agent "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" AgentBuilder("}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"test"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:").version("}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"1.0.0"'}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:").build()"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    result "}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" service.compile(agent)"})]}),"\n",(0,e.jsxs)(n.span,{children:[(0,e.jsx)(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    assert"}),(0,e.jsx)(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" result.is_valid"})]})]})}),"\n",(0,e.jsx)(n.h2,{id:s[21].id,children:s[21].value}),"\n",(0,e.jsxs)(n.ol,{children:["\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:"Testability"})," - Each layer can be tested in isolation"]}),"\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:"Maintainability"})," - Changes in one layer don’t cascade"]}),"\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:"Flexibility"})," - Easy to swap implementations"]}),"\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:"Clarity"})," - Obvious where code belongs"]}),"\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:"Stability"})," - Domain logic is protected from external changes"]}),"\n"]}),"\n",(0,e.jsx)(n.h2,{id:s[22].id,children:s[22].value}),"\n",(0,e.jsx)(n.p,{children:"When contributing:"}),"\n",(0,e.jsxs)(n.ol,{children:["\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:"Domain changes"}),": Only pure business logic, no external dependencies"]}),"\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:"Port changes"}),": Define capabilities the core needs"]}),"\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:"Adapter changes"}),": Implement port interfaces"]}),"\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:"Application changes"}),": Orchestrate via ports, use dependency injection"]}),"\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:"Infrastructure changes"}),": Update dependency wiring"]}),"\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:"Public API changes"}),": Minimize exports, maintain backward compatibility"]}),"\n"]}),"\n",(0,e.jsx)(n.p,{children:"Always ensure changes maintain the dependency inversion principle: dependencies point inward toward the domain."}),"\n",(0,e.jsx)(n.h2,{id:s[23].id,children:s[23].value}),"\n",(0,e.jsxs)(n.ul,{children:["\n",(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:"../../../CONTRIBUTING",children:"CONTRIBUTING.md"})," - Contribution guidelines"]}),"\n",(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:"https://martinfowler.com/bliki/DomainDrivenDesign.html",children:"Domain-Driven Design"})}),"\n",(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:"https://alistair.cockburn.us/hexagonal-architecture/",children:"Hexagonal Architecture"})}),"\n"]}),"\n",(0,e.jsx)(n.hr,{}),"\n",(0,e.jsx)(n.p,{children:"This architecture ensures the SDK remains maintainable, testable, and aligned with clean architecture principles."})]})},"/v1/advanced/architecture-overview",{filePath:"pages/v1/advanced/architecture-overview.mdx",timestamp:1767029985e3,pageMap:l.v,frontMatter:{},title:"Architecture Overview"},"undefined"==typeof RemoteContent?d:RemoteContent.useTOC)},8036:function(i,s,n){"use strict";n.d(s,{v:function(){return e}});let e=[{data:{index:{title:"Home",type:"page",display:"hidden"},v1:"Documentation"}},{name:"index",route:"/",frontMatter:{sidebarTitle:"Index"}},{name:"v1",route:"/v1",children:[{data:{"getting-started":"Getting Started",concepts:"Concepts",guides:"Guides","api-reference":"API Reference",advanced:"Advanced"}},{name:"advanced",route:"/v1/advanced",children:[{data:{"architecture-overview":"Architecture Overview (Contributors)"}},{name:"architecture-overview",route:"/v1/advanced/architecture-overview",frontMatter:{sidebarTitle:"Architecture Overview"}}]},{name:"api-reference",route:"/v1/api-reference",children:[{data:{api:"API Overview",builders:"Builders",entities:"Entities",cli:"CLI"}},{name:"api",route:"/v1/api-reference/api",frontMatter:{sidebarTitle:"API"}},{name:"builders",route:"/v1/api-reference/builders",frontMatter:{sidebarTitle:"Builders"}},{name:"cli",route:"/v1/api-reference/cli",frontMatter:{sidebarTitle:"CLI"}},{name:"entities",route:"/v1/api-reference/entities",frontMatter:{sidebarTitle:"Entities"}}]},{name:"concepts",route:"/v1/concepts",children:[{data:{"what-is-an-agent":"What is an Agent?","how-the-sdk-works":"How the SDK Works","what-you-control":"What You Control","building-your-agent":"Building Your Agent"}},{name:"building-your-agent",route:"/v1/concepts/building-your-agent",frontMatter:{sidebarTitle:"Building Your Agent"}},{name:"how-the-sdk-works",route:"/v1/concepts/how-the-sdk-works",frontMatter:{sidebarTitle:"How the Sdk Works"}},{name:"what-is-an-agent",route:"/v1/concepts/what-is-an-agent",frontMatter:{sidebarTitle:"What Is an Agent"}},{name:"what-you-control",route:"/v1/concepts/what-you-control",frontMatter:{sidebarTitle:"What You Control"}}]},{name:"getting-started",route:"/v1/getting-started",children:[{data:{index:"Overview",installation:"Installation",quickstart:"Quickstart","your-first-agent":"Your First Agent"}},{name:"index",route:"/v1/getting-started",frontMatter:{sidebarTitle:"Index"}},{name:"installation",route:"/v1/getting-started/installation",frontMatter:{sidebarTitle:"Installation"}},{name:"quickstart",route:"/v1/getting-started/quickstart",frontMatter:{sidebarTitle:"Quickstart"}},{name:"your-first-agent",route:"/v1/getting-started/your-first-agent",frontMatter:{sidebarTitle:"Your First Agent"}}]},{name:"guides",route:"/v1/guides",children:[{data:{workflows:"Workflows",modules:"Modules",tools:"Tools",prompts:"Prompts",validation:"Validation","yaml-export":"YAML Export",errors:"Error Handling"}},{name:"errors",route:"/v1/guides/errors",frontMatter:{sidebarTitle:"Errors"}},{name:"modules",route:"/v1/guides/modules",frontMatter:{sidebarTitle:"Modules"}},{name:"prompts",route:"/v1/guides/prompts",frontMatter:{sidebarTitle:"Prompts"}},{name:"tools",route:"/v1/guides/tools",frontMatter:{sidebarTitle:"Tools"}},{name:"validation",route:"/v1/guides/validation",frontMatter:{sidebarTitle:"Validation"}},{name:"workflows",route:"/v1/guides/workflows",frontMatter:{sidebarTitle:"Workflows"}},{name:"yaml-export",route:"/v1/guides/yaml-export",frontMatter:{sidebarTitle:"Yaml Export"}}]}]}]}},function(i){i.O(0,[812,888,774,179],function(){return i(i.s=4516)}),_N_E=i.O()}]);