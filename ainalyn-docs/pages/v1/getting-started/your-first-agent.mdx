# Your First Agent

Build a complete agent step by step.

## What We'll Build

A research assistant that:
1. Searches for information
2. Analyzes findings
3. Generates a report

## Step 1: Create the Nodes

```python
from ainalyn import NodeBuilder

# Node 1: Search
search_node = (
    NodeBuilder("search_information")
    .goal("Search and collect relevant information")
    .build()
)

# Node 2: Analyze (depends on search)
analyze_node = (
    NodeBuilder("analyze_findings")
    .goal("Analyze the collected information")
    .depends_on("search_information")
    .build()
)

# Node 3: Report (depends on analyze)
report_node = (
    NodeBuilder("generate_report")
    .goal("Create a structured research report")
    .depends_on("analyze_findings")
    .build()
)
```

**Dependencies:** `search → analyze → report`

## Step 2: Create the Workflow

```python
from ainalyn import WorkflowBuilder

research_workflow = (
    WorkflowBuilder("conduct_research")
    .description("Research and reporting workflow")
    .add_node(search_node)
    .add_node(analyze_node)
    .add_node(report_node)
    .build()
)
```

## Step 3: Create the Agent

```python
from ainalyn import AgentBuilder

research_agent = (
    AgentBuilder("ResearchAssistant")
    .description("Searches, analyzes, and reports on topics")
    .version("1.0.0")
    .add_workflow(research_workflow)
    .build()
)
```

## Step 4: Validate and Export

```python
from ainalyn.api import validate, export_yaml

# Validate
validate(research_agent)
print("Valid!")

# Export
yaml_output = export_yaml(research_agent)

# Save to file
with open("research_assistant.yaml", "w") as f:
    f.write(yaml_output)
```

## Complete Code

`research_agent.py`:

```python
from ainalyn import AgentBuilder, WorkflowBuilder, NodeBuilder
from ainalyn.api import validate, export_yaml

# Create nodes
search_node = (
    NodeBuilder("search_information")
    .goal("Search and collect relevant information")
    .build()
)

analyze_node = (
    NodeBuilder("analyze_findings")
    .goal("Analyze the collected information")
    .depends_on("search_information")
    .build()
)

report_node = (
    NodeBuilder("generate_report")
    .goal("Create a structured research report")
    .depends_on("analyze_findings")
    .build()
)

# Create workflow
research_workflow = (
    WorkflowBuilder("conduct_research")
    .description("Research and reporting workflow")
    .add_node(search_node)
    .add_node(analyze_node)
    .add_node(report_node)
    .build()
)

# Create agent
research_agent = (
    AgentBuilder("ResearchAssistant")
    .description("Searches, analyzes, and reports on topics")
    .version("1.0.0")
    .add_workflow(research_workflow)
    .build()
)

# Validate and export
validate(research_agent)
yaml_output = export_yaml(research_agent)

with open("research_assistant.yaml", "w") as f:
    f.write(yaml_output)

print("Agent created and saved!")
```

## Run It

```bash
python research_agent.py
```

## The Generated YAML

```yaml
name: ResearchAssistant
version: 1.0.0
description: Searches, analyzes, and reports on topics
workflows:
  - name: conduct_research
    description: Research and reporting workflow
    nodes:
      - name: search_information
        goal: Search and collect relevant information
        dependencies: []
      - name: analyze_findings
        goal: Analyze the collected information
        dependencies:
          - search_information
      - name: generate_report
        goal: Create a structured research report
        dependencies:
          - analyze_findings
```

## Key Concepts

**Dependencies**
- Use `.depends_on()` to set execution order
- Dependencies create a task graph
- Platform executes nodes in order

**Builder Pattern**
- Always call `.build()` at the end
- Methods return `self` for chaining
- Immutable entities created on `.build()`

**Bottom-Up Construction**
1. Build nodes first
2. Add nodes to workflow
3. Add workflow to agent

## Common Mistakes

**Forgetting .build()**
```python
# Wrong
node = NodeBuilder("task").goal("Do something")

# Correct
node = NodeBuilder("task").goal("Do something").build()
```

**Circular dependencies**
```python
# Wrong (A depends on B, B depends on A)
node_a = NodeBuilder("A").depends_on("B").build()
node_b = NodeBuilder("B").depends_on("A").build()
```

**Invalid names**
```python
# Wrong
AgentBuilder("my-agent")   # No hyphens in Python-style names
AgentBuilder("My Agent")   # No spaces

# Correct
AgentBuilder("MyAgent")    # CamelCase
AgentBuilder("my_agent")   # snake_case
```

## Next Steps

- [Platform Boundaries](/docs/v1/concepts/platform-boundaries/) - What the SDK can/cannot do
- [API Reference](/docs/v1/api-reference/builders/) - All builder methods
- [Workflows](/docs/v1/guides/workflows/) - Advanced workflow patterns
- [Modules](/docs/v1/guides/modules/) - Create custom modules

## Need Help?

- [Quickstart](/docs/v1/getting-started/quickstart/) - Simpler example
- [API docs](/docs/v1/api-reference/api/) - Function reference
- [Issues](https://github.com/CoreNovus/ainalyn-sdk/issues) - Report bugs
